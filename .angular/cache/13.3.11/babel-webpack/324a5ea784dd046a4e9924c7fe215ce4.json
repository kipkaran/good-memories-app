{"ast":null,"code":"import { MatTableDataSource } from '@angular/material/table';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../users.service\";\nimport * as i2 from \"../albums-service.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../authentication.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/progress-spinner\";\nimport * as i7 from \"@angular/material/table\";\n\nfunction UsersListComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵelement(1, \"mat-spinner\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UsersListComponent_th_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 14);\n    i0.ɵɵtext(1, \" No. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UsersListComponent_td_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const users_r13 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", users_r13.id, \" \");\n  }\n}\n\nfunction UsersListComponent_th_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 14);\n    i0.ɵɵtext(1, \" Name \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UsersListComponent_td_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const users_r14 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", users_r14.name, \" \");\n  }\n}\n\nfunction UsersListComponent_th_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 14);\n    i0.ɵɵtext(1, \" Username \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UsersListComponent_td_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const users_r15 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", users_r15.username, \" \");\n  }\n}\n\nfunction UsersListComponent_th_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 14);\n    i0.ɵɵtext(1, \" Email \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UsersListComponent_td_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const users_r16 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", users_r16.email, \" \");\n  }\n}\n\nfunction UsersListComponent_th_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 14);\n    i0.ɵɵtext(1, \" Total Albums \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UsersListComponent_td_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 15)(1, \"a\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const users_r17 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(users_r17.albumTotal);\n  }\n}\n\nfunction UsersListComponent_tr_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 16);\n  }\n}\n\nfunction UsersListComponent_tr_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\", 17);\n    i0.ɵɵlistener(\"click\", function UsersListComponent_tr_22_Template_tr_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r20);\n      const row_r18 = restoredCtx.$implicit;\n      const ctx_r19 = i0.ɵɵnextContext();\n      return ctx_r19.openAlbums(row_r18);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r18 = ctx.$implicit;\n    const ctx_r12 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"selected\", row_r18 === ctx_r12.selectedRow);\n  }\n}\n\nexport let UsersListComponent = /*#__PURE__*/(() => {\n  class UsersListComponent {\n    constructor(userService, albumsService, router, authetication) {\n      this.userService = userService;\n      this.albumsService = albumsService;\n      this.router = router;\n      this.authetication = authetication; //variable to store loading state for mat-spinner\n\n      this.isLoading = true; //this variable is used to display required columns\n\n      this.displayedColumns = ['id', 'name', 'username', 'email', 'albumsTotal']; //variable to store fetched data\n\n      this.dataSource = new MatTableDataSource([]); //this tracks selected row\n\n      this.selectedRow = null;\n    }\n\n    ngOnInit() {\n      //calling the users list method on initialisation\n      this.getUserList();\n    } // This method gets  data from the jsonplaceholder via a service. \n\n\n    getUserList() {\n      this.userService.getUsersWithTotalAlbums().subscribe(data => {\n        console.log(data);\n        this.dataSource.data = data;\n        this.isLoading = false;\n      });\n    } // logging out method\n\n\n    logOut() {\n      sessionStorage.removeItem('loggedInUser');\n      this.authetication.signOut();\n    } //This method navigates to the album page and handl's row click\n\n\n    openAlbums(row) {\n      this.selectedRow = this.selectedRow === row ? null : this.router.navigate(['album']);\n    }\n\n  }\n\n  UsersListComponent.ɵfac = function UsersListComponent_Factory(t) {\n    return new (t || UsersListComponent)(i0.ɵɵdirectiveInject(i1.UsersService), i0.ɵɵdirectiveInject(i2.AlbumsServiceService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.AuthenticationService));\n  };\n\n  UsersListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UsersListComponent,\n    selectors: [[\"app-users-list\"]],\n    decls: 23,\n    vars: 4,\n    consts: [[1, \"users-title\"], [\"class\", \"spinner-container\", 4, \"ngIf\"], [1, \"mat-elevation-z8\", \"users-table\"], [\"mat-table\", \"\", 3, \"dataSource\"], [\"matColumnDef\", \"id\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"name\"], [\"matColumnDef\", \"username\"], [\"matColumnDef\", \"email\"], [\"matColumnDef\", \"albumsTotal\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 3, \"selected\", \"click\", 4, \"matRowDef\", \"matRowDefColumns\"], [1, \"spinner-container\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\", 3, \"click\"]],\n    template: function UsersListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n        i0.ɵɵtext(2, \"Users\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(3, UsersListComponent_div_3_Template, 2, 0, \"div\", 1);\n        i0.ɵɵelementStart(4, \"div\", 2)(5, \"table\", 3);\n        i0.ɵɵelementContainerStart(6, 4);\n        i0.ɵɵtemplate(7, UsersListComponent_th_7_Template, 2, 0, \"th\", 5);\n        i0.ɵɵtemplate(8, UsersListComponent_td_8_Template, 2, 1, \"td\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(9, 7);\n        i0.ɵɵtemplate(10, UsersListComponent_th_10_Template, 2, 0, \"th\", 5);\n        i0.ɵɵtemplate(11, UsersListComponent_td_11_Template, 2, 1, \"td\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(12, 8);\n        i0.ɵɵtemplate(13, UsersListComponent_th_13_Template, 2, 0, \"th\", 5);\n        i0.ɵɵtemplate(14, UsersListComponent_td_14_Template, 2, 1, \"td\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(15, 9);\n        i0.ɵɵtemplate(16, UsersListComponent_th_16_Template, 2, 0, \"th\", 5);\n        i0.ɵɵtemplate(17, UsersListComponent_td_17_Template, 2, 1, \"td\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(18, 10);\n        i0.ɵɵtemplate(19, UsersListComponent_th_19_Template, 2, 0, \"th\", 5);\n        i0.ɵɵtemplate(20, UsersListComponent_td_20_Template, 3, 1, \"td\", 6);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(21, UsersListComponent_tr_21_Template, 1, 0, \"tr\", 11);\n        i0.ɵɵtemplate(22, UsersListComponent_tr_22_Template, 1, 2, \"tr\", 12);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n        i0.ɵɵadvance(16);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n      }\n    },\n    directives: [i5.NgIf, i6.MatProgressSpinner, i7.MatTable, i7.MatColumnDef, i7.MatHeaderCellDef, i7.MatHeaderCell, i7.MatCellDef, i7.MatCell, i7.MatHeaderRowDef, i7.MatHeaderRow, i7.MatRowDef, i7.MatRow],\n    styles: [\".users-title[_ngcontent-%COMP%]{margin:.5rem auto;width:94%;text-align:center}.spinner-container[_ngcontent-%COMP%]{margin:.5rem auto;padding:.5rem;display:flex;justify-content:center;align-items:center}.users-table[_ngcontent-%COMP%]{margin:1rem auto;width:90%;background:rgba(255,255,255,.4)!important;border-radius:16px!important;box-shadow:0 4px 30px #0000001a!important;backdrop-filter:blur(7.4px)!important;-webkit-backdrop-filter:blur(7.4px)!important;border:1px solid rgba(255,255,255,.3)!important}.users-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;color:#3d0146}.users-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#3d0146;font-weight:500}.users-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#3d0146}.users-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-action[_ngcontent-%COMP%]{max-width:fit-content;padding:auto .125rem}.users-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-column-memberId[_ngcontent-%COMP%]{font-weight:500;text-align:center}.users-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:hover{background-image:linear-gradient(to right top,#81b622,#2cd4a0,#5ee4f2,#c9edff,#ffffff);color:#fff;cursor:pointer}\"]\n  });\n  return UsersListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}